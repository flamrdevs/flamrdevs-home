---
import type { HTMLAttributes } from "astro/types";

import * as ButtonCSS from "@flamrdevs/ui/core/Button.recipe.css";
import propsplit from "@flamrdevs/x/modules/propsplit";

import { getButtonAttrs } from "./attributes/button";
import type { ButtonOptions } from "./attributes/button";

import { ClassesKeys, classex } from "./../classes";

type Props = HTMLAttributes<"button"> & ButtonOptions & ButtonCSS.Variants & ButtonCSS.InnerVariants & ButtonCSS.ChildVariants;

const [classes, options, recipe, attrs] = propsplit(Astro.props, ClassesKeys, ["disabled"], [...ButtonCSS.RootKeys, ...ButtonCSS.ChildKeys]);

const className = classex(ButtonCSS.Root({ color: recipe.color, size: recipe.size }), classes);
const innerClassName = ButtonCSS.Inner({ color: recipe.color });
const childClassName = ButtonCSS.Child({ font: recipe.font, size: recipe.size });
---

<button type="button" {...attrs} class={className} {...getButtonAttrs(options)}>
	<div class={innerClassName}>
		<div class={childClassName}>
			<slot />
		</div>
	</div>
</button>
