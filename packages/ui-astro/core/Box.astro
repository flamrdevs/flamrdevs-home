---
import * as Recipes from "@flamrdevs/ui/core/.recipes.css";
import * as Sprinkles from "@flamrdevs/ui/core/.sprinkles.css";
import propsplit from "@flamrdevs/x/modules/propsplit";

import { ClassesKeys, classex } from "./../classes";
import type * as Polymorphic from "./../polymorphic";

import type { BoxPolymorphicProps } from "./Box.types";

type Props<As extends Polymorphic.As = "div"> = BoxPolymorphicProps<As>;

const { as: As = "div", ...props } = Astro.props;

const [classes, typography, layout, position, margin, padding, attrs] = propsplit(
	props,
	ClassesKeys,
	Recipes.TypographyKeys,
	Sprinkles.LayoutKeys,
	Sprinkles.PositionKeys,
	Sprinkles.MarginKeys,
	Sprinkles.PaddingKeys
);

const className = classex(
	[Recipes.Typography(typography), Sprinkles.Layout(layout), Sprinkles.Position(position), Sprinkles.Margin(margin), Sprinkles.Padding(padding)],
	classes
);
---

<As {...attrs as any} class={className}>
	<slot />
</As>
